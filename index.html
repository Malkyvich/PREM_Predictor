<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PREM Predictor</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .fixture { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
    .teams { font-weight: bold; }
    .prediction-box { display: flex; gap: 5px; align-items: center; }
    .prediction-box input { width: 50px; padding: 3px; }
    .prediction-box button { padding: 3px 6px; }
    .saved { margin-left: 10px; color: green; font-weight: bold; }
    #playerSelect { margin-bottom: 20px; padding: 5px; }
  </style>
</head>
<body>

<h1>Rugby Premiership Predictor</h1>

<label for="playerSelect">Choose player:</label>
<select id="playerSelect">
  <option value="Martin">Martin</option>
  <option value="Charles">Charles</option>
  <option value="Alex">Alex</option>
</select>

<div class="fixture"><span class="teams">Leicester vs Bath</span></div>
<div class="fixture"><span class="teams">Exeter vs Harlequins</span></div>
<div class="fixture"><span class="teams">Northampton vs Sale</span></div>
<div class="fixture"><span class="teams">Gloucester vs Wasps</span></div>

<script>
  // --- Save/load predictions ---
  function savePrediction(fixtureId, player, home, away) {
    let predictions = JSON.parse(localStorage.getItem("predictions") || "{}");
    if (!predictions[fixtureId]) predictions[fixtureId] = {};
    predictions[fixtureId][player] = {home, away};
    localStorage.setItem("predictions", JSON.stringify(predictions));
  }

  function loadPrediction(fixtureId, player) {
    let predictions = JSON.parse(localStorage.getItem("predictions") || "{}");
    return predictions[fixtureId] ? predictions[fixtureId][player] : null;
  }

  // --- Add prediction boxes to each fixture div ---
  function renderPredictionBoxes() {
    const player = document.getElementById("playerSelect").value;
    const fixtures = document.querySelectorAll(".fixture");

    fixtures.forEach((fixture, i) => {
      const fixtureId = "fixture-" + i;

      let box = fixture.querySelector(".prediction-box");
      if (!box) {
        box = document.createElement("div");
        box.classList.add("prediction-box");
        box.innerHTML = `
          <input type="number" class="pred-home" placeholder="Home">
          <input type="number" class="pred-away" placeholder="Away">
          <button class="save-pred">Save</button>
          <span class="saved"></span>
        `;
        fixture.appendChild(box);

        box.querySelector(".save-pred").addEventListener("click", () => {
          const home = box.querySelector(".pred-home").value;
          const away = box.querySelector(".pred-away").value;
          savePrediction(fixtureId, player, home, away);
          box.querySelector(".saved").innerText = `Saved: ${home}-${away}`;
        });
      }

      const pred = loadPrediction(fixtureId, player);
      if (pred) {
        box.querySelector(".pred-home").value = pred.home;
        box.querySelector(".pred-away").value = pred.away;
        box.querySelector(".saved").innerText = `Saved: ${pred.home}-${pred.away}`;
      } else {
        box.querySelector(".pred-home").value = "";
        box.querySelector(".pred-away").value = "";
        box.querySelector(".saved").innerText = "";
      }
    });
  }

  document.getElementById("playerSelect").addEventListener("change", renderPredictionBoxes);
  window.onload = renderPredictionBoxes;
</script>

</body>
</html>
